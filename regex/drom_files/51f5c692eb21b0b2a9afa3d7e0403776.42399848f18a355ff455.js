(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[6088],{90978:function(t,n,e){"use strict";e.d(n,{DU:function(){return C},U1:function(){return T},vc:function(){return _},kf:function(){return S}});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function i(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var o,a,c=function(){return(c=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};!function(t){t.SECTION="section",t.NAME="name",t.COUNTER="counter",t.PAYLOAD="payload",t.VALUE="value",t.NON_INTERACTION="nonInteraction"}(o||(o={})),function(t){t.GA="ga",t.VA="va",t.SA="sa",t.YA="ya"}(a||(a={}));var u=Object.values(a),s=function(t){function n(n,e){var r=t.call(this,n)||this;return r.attributes=e,r}return i(n,t),n}(Error),f=function(t,n){var e=t;return"%is_mobile%"===t&&(e=n.is_mobile?"m":""),e||n.page||""};function l(t,n,e,r,i){void 0===i&&(i="");var o=e.prefix,a=""+o+r+"-"+n,c=o+n,u=t.getAttribute(a)||t.getAttribute(c);if(!u&&!i)return"";var s=[u||i];if(t.hasAttribute(a+"-prefix")||t.hasAttribute(c+"-prefix")){var l=t.getAttribute(a+"-prefix")||t.getAttribute(c+"-prefix");(l=f(l,e))&&s.unshift(f(l,e))}if(t.hasAttribute(a+"-suffix")||t.hasAttribute(c+"-suffix")){var d=t.getAttribute(a+"-suffix")||t.getAttribute(c+"-suffix");(d=f(d,e))&&s.push(f(d,e))}return s.join("__")}var d,v=function(){function t(){this.engine=a.GA}return t.prototype.track=function(n){var e=this;return new Promise((function(r,i){e.isInitialized(n)||i(new s("Could not track: Ga tracker not initialized",n));var o=t.toAttributes(n),a=t.toSendCommand(n);try{(0,window.ga)(a,c(c({},o),{hitCallback:function(){r({message:'ga("'+a+'", '+JSON.stringify(o)+")",attributes:o})}}))}catch(t){i(new s("Could not track. "+t,o))}finally{n.callback&&n.callback()}}))},t.prototype.isInitialized=function(t){return"function"==typeof window.ga},t.toAttributes=function(t){var n=t.section,e=t.event,r=t.name,i=t.value,o={hitType:"event",eventCategory:n,eventAction:e,eventLabel:r,nonInteraction:t.nonInteraction,transport:"beacon"},a=parseInt(i,10);return a&&(o.eventValue=a),o},t.toSendCommand=function(t){return(t.counter?t.counter+".":"")+"send"},t}(),p=function(){function t(){this.engine=a.SA}return t.prototype.track=function(t){var n=this;return new Promise((function(e,r){var i=n.toAttributes(t),o=i.url,a=i.payload;o||r(new s("Could not track. No url provided",i));var c,u=o;a&&(u+="?"+(c=a,Object.keys(c).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(c[t]||"")})).join("&")));var f={message:'GET: "'+u+'"',attributes:i},l=function(n){r(new s("Could not track. "+n,i)),t.callback&&t.callback()};try{fetch(u,{credentials:"include",mode:"no-cors",keepalive:t.keepalive}).then((function(){e(f),t.callback&&t.callback()}),l)}catch(t){l(t)}}))},t.prototype.isInitialized=function(t){return!0},t.prototype.toAttributes=function(t){var n=t.counter,e=t.payload,r={url:n};return e&&(r.payload=e),r},t}(),h=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.engine=a.VA,n}return i(n,t),n.prototype.toAttributes=function(n){var e=t.prototype.toAttributes.call(this,n),r=n.section,i=n.event,o=n.name;return e.payload=c({section:r,event:i,who:o},e.payload||{}),e},n}(p),y=function(){function t(){this.engine=a.YA}return t.prototype.track=function(n){var e=this;return new Promise((function(r,i){var o=t.toAttributes(n),a=o.counter,c=o.target;a||i(new s("Could not track. No counter provided",o)),c||i(new s("Could not track. No target provided",o));var u="yaCounter"+a;e.isInitialized(n)||i(new s("Could not track: Counter "+u+" not initialized",o));try{window[u].reachGoal(c,{},(function(){return r({message:u+'.reachGoal("'+c+'")',attributes:o})}))}catch(t){i(new s("Could not track. "+t,o))}finally{n.callback&&n.callback()}}))},t.prototype.isInitialized=function(t){var n="yaCounter"+t.counter;return"object"==typeof window[n]&&"function"==typeof window[n].reachGoal},t.toAttributes=function(t){return{counter:t.counter,target:t.name}},t}(),w=((d={})[a.GA]=v,d[a.VA]=h,d[a.YA]=y,d[a.SA]=p,d),A=function(){function t(t){this.defaults=t}return t.prototype.toTracker=function(t){var n,e,r,o,a=w[t];if(!a)throw new Error("tracker implementation not found");return n="no_"+t,((e=window.document.cookie.split(";").find((function(t){return t.indexOf(n+"=")>=0})))&&e.slice(e.indexOf("=")+1,e.length)||"dev"===this.defaults.env)&&(a=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.isFake=!0,n}return i(n,t),n.prototype.track=function(t){var n=this;return new Promise((function(e,r){n.isInitialized(t)?e({message:"Success",attributes:t}):r(new s("Could not track.",t))}))},n}(a)),a=(void 0===r&&(r=300),void 0===o&&(o=5),function(t){return function(t){function n(n){var e=t.call(this,n)||this;return e.interval=r,e.attemptsCount=o,e}return i(n,t),n.prototype.track=function(t){var n=this;return new Promise((function(e,r){return n.checkAvailability(t,e,r,n.attemptsCount)}))},n.prototype.checkAvailability=function(n,e,r,i){var o=this;i>0&&!this.isInitialized(n)?setTimeout((function(){o.checkAvailability(n,e,r,i-1)}),this.interval):t.prototype.track.call(this,n).then(e,r)},n}(t)})(a),this.defaults.debug&&(a=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.isLogger=!0,n}return i(n,t),n.prototype.track=function(n){var e=this;return new Promise((function(r,i){var o="["+e.engine.toUpperCase()+"_STATS]";t.prototype.track.call(e,n).then((function(t){var n=t.message,e=t.attributes;window.console.log(o+" "+n+" Attributes: "+JSON.stringify(e)),r(t)}),(function(t){var n=t.message,e=t.attributes;window.console.warn(o+" "+n+" Attributes: "+JSON.stringify(e)),i(t)}))}))},n}(a)),new a(t)},t}(),b={prefix:"data-ga-stats-",debug:!1,env:"prod",section:"common",page:"",is_mobile:!1,dummy_url:"//www.drom.ru/dummy.txt",engine:[a.GA]},m={ready:"track-ready",view:"track-view",click:"track-click"},g=function(){return window.statsScopeStack||(window.statsScopeStack=[]),window.statsScopeStack},k=function(){var t=g();if(!t.length)throw new s("GaStatsConfig Scope not initialized");return t[t.length-1]},O=function(t){var n=g(),e=c(c({},b),t),r={config:e,trackerFactory:new A(e)};return n.push(r),r},E=function(t,n){O(n);try{return t()}catch(t){return Promise.reject(new s("Could not track with scope",n))}finally{g().pop()}},N=function(t,n){var e=k().config,r=e.section,i=e.dummy_url;return!t[o.COUNTER]&&[a.SA,a.VA].indexOf(n)>-1&&(t[o.COUNTER]=i),t[o.SECTION]||(t[o.SECTION]=r),!t[o.NON_INTERACTION]&&a.GA===n&&["view","ready"].indexOf(t.event)>=0&&(t[o.NON_INTERACTION]=!0),t},C=function(t,n){if(n)return E((function(){return C(t)}),n);try{return k().trackerFactory.toTracker(a.GA).track(N(t,a.GA))}catch(t){return new Promise((function(n,e){return e(t)}))}},S=function(t,n){if(n)return E((function(){return S(t)}),n);try{return k().trackerFactory.toTracker(a.YA).track(N(t,a.YA))}catch(t){return new Promise((function(n,e){return e(t)}))}},T=function(t,n){if(n)return E((function(){return T(t)}),n);try{return k().trackerFactory.toTracker(a.SA).track(N(t,a.SA))}catch(t){return new Promise((function(n,e){return e(t)}))}},_=function(t,n){if(n)return E((function(){return _(t)}),n);try{return k().trackerFactory.toTracker(a.VA).track(N(t,a.VA))}catch(t){return new Promise((function(n,e){return e(t)}))}},I=function(t,n,e){var r;void 0===e&&(e=!1);var i=k().config,c=i.prefix,s=[];t.hasAttribute(""+c+m[n])&&(s=t.hasAttribute(c+"engine")?t.getAttribute(c+"engine").split("|"):i.engine);var f=new RegExp(c+"("+u.join("|")+")-"+m[n]);Array.prototype.forEach.call(t.attributes,(function(t){var n=t.name.match(f),e=n?n[1]:null;e&&s.indexOf(e)<0&&s.push(e)}));var d=((r={})[a.GA]=C,r[a.VA]=_,r[a.YA]=S,r[a.SA]=T,r);s.filter((function(t){return void 0!==d[t]})).map((function(r){return d[r](function(t,n,e,r){var i;void 0===r&&(r=!1);var c=k().config,u=l(t,m[e],c,n,e),s=((i={event:"true"===u?e:u})[o.SECTION]=l(t,o.SECTION,c,n),i[o.NAME]=l(t,o.NAME,c,n),i[o.COUNTER]=l(t,o.COUNTER,c,n),i.keepalive=r,i);if(n===a.GA){s[o.VALUE]=l(t,o.VALUE,c,n);var f=l(t,o.NON_INTERACTION,c,n);("true"===f||!f&&["view","ready"].indexOf(e)>=0)&&(s[o.NON_INTERACTION]=!0)}if(n===a.VA||n===a.SA){var d=l(t,o.PAYLOAD,c,n);d&&(s.payload=JSON.parse(d))}return s}(t,r,n,e)).then((function(t){return t}),(function(t){return console.warn(t.message,t.attributes),t}))}))},L=function(t){var n=t.currentTarget;if(window.TouchEvent&&t instanceof TouchEvent&&"touchstart"===t.type&&t.targetTouches.length>0)n.removeEventListener("touchend",L,!0),n.addEventListener("touchend",L,!0);else{if(window.TouchEvent&&t instanceof TouchEvent&&"touchend"===t.type&&(n.removeEventListener("touchend",L,!0),0===t.targetTouches.length))return;var e=k().config.prefix;n.hasAttribute(e+"infinity-tracking")||(n.removeEventListener("mousedown",L,!0),n.removeEventListener("touchstart",L,!0)),I(n,"click",!0)}},x=function(t,n){t.forEach((function(t){var e=t.isIntersecting,r=t.target,i=t.intersectionRatio;("undefined"!==e?e:i>0)&&(I(r,"view"),n.unobserve(r))}))},P=function(t){var n=k().config.prefix,e=u.map((function(e){return"["+n+e+"-"+m[t]+"]"}));return e.push("["+n+m[t]+"]"),e.join(", ")},G=function(t){if(t instanceof Element&&(t.matches(P("ready"))&&I(t,"ready"),void 0!==window.intObserver&&t.matches(P("view"))&&window.intObserver.observe(t),t.matches(P("click"))&&(t.addEventListener("mousedown",L,!0),t.addEventListener("touchstart",L,!0)),t.children&&t.children.length))for(var n=0,e=t.children.length;n<e;n++)G(t.children[n])},U=function(t){t.forEach((function(t){var n=t.type,e=t.target,r=t.addedNodes;"attributes"===n&&G(e),"childList"===n&&r&&Array.prototype.forEach.call(r,(function(t){G(t)}))}))};n.ZP=function(t){O(t),void 0!==IntersectionObserver&&(window.intObserver=new IntersectionObserver(x,{threshold:[0,.1]}));var n,e=window.MutationObserver||window.WebkitMutationObserver;e&&(window.mutObserver=new e(U)),n=function(){if(void 0!==window.mutObserver){var t=["ready","view","click"].reduce((function(t,n){return function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;var r=Array(t),i=0;for(n=0;n<e;n++)for(var o=arguments[n],a=0,c=o.length;a<c;a++,i++)r[i]=o[a];return r}(t,P(n).split(", ").map((function(t){return t.replace(/[[\]]/gi,"")})))}),[]);window.mutObserver.observe(document.body,{subtree:!0,attributes:!0,attributeFilter:t,childList:!0})}Array.prototype.forEach.call(document.querySelectorAll(P("ready")),(function(t){I(t,"ready")})),void 0!==window.intObserver&&Array.prototype.forEach.call(document.querySelectorAll(P("view")),(function(t){window.intObserver.observe(t)})),Array.prototype.forEach.call(document.querySelectorAll(P("click")),(function(t){t.addEventListener("mousedown",L,!0),t.addEventListener("touchstart",L,!0)}))},"interactive"===document.readyState||"complete"===document.readyState?n():document.addEventListener("DOMContentLoaded",(function(){return n()}))}}}]);